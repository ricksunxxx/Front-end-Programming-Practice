<!DOCTYPE html>
<html lang="en">
  <head>
    <title>canvas如何给图片画圆角</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <script>
      var width = 400 // 图片宽度
      var height = 200 // 图片高度
      var radius = 50 // 圆角半径，控制圆角大小
      var canvas = document.getElementById('canvas')
      var ctx = canvas.getContext('2d')
      var dpr = devicePixelRatio
      canvas.width = width * dpr
      canvas.height = height * dpr

      var img = new Image()
      img.src =
        'https://mdn.mozillademos.org/files/222/Canvas_createpattern.png'
      img.onload = function () {
        var pattern = ctx.createPattern(img, 'repeat')
        ctx.fillStyle = pattern
        ctx.beginPath()
        ctx.arc(radius, radius, radius, Math.PI, 1.5 * Math.PI) // 左上角圆弧
        ctx.arc(width - radius, radius, radius, 1.5 * Math.PI, 2 * Math.PI) // 右上角圆弧
        ctx.arc(width - radius, height - radius, radius, 0, 0.5 * Math.PI) // 右下角圆弧
        ctx.arc(radius, height - radius, radius, 0.5 * Math.PI, Math.PI) // 左下角圆弧
        ctx.closePath()
        ctx.fill()
      }
    </script>
  </body>
</html>
